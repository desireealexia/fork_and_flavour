{% extends 'base.html' %} 
{% load static %} 
{% block title %}{{ recipe.title }} - Fork & Flavour{% endblock %} 
{% block content %}

<div class="container mt-5">
  <!-- Recipe Header -->
  <h1 class="text-center">{{ recipe.title }}</h1>
  <p class="text-center text-muted">Recipe by {{ recipe.user }}</p>
  <p class="text-center">{{ recipe.description }}</p>

   <!-- Edit and Delete Buttons (only visible to the recipe author) -->
   {% if request.user == recipe.user %}
   <div class="d-flex justify-content-center mb-4">
     <!-- Edit Button -->
     <a href="{% url 'recipe_update' recipe.slug %}" class="btn btn-warning mx-3 py-2 px-4 rounded-pill shadow-sm" data-toggle="tooltip" data-placement="top" title="Edit this recipe">
       <i class="fas fa-edit"></i> Edit
     </a>
 
     <!-- Delete Button -->
     <a href="{% url 'recipe_delete' recipe.slug %}" class="btn btn-danger py-2 px-4 rounded-pill shadow-sm" data-toggle="tooltip" data-placement="top" title="Delete this recipe">
      <i class="fas fa-trash-alt"></i> Delete
    </a>
   </div>
   {% endif %}

  <!-- Recipe Image -->
  <div class="text-center mb-4">
    {% if recipe.image %}
    <img
      src="{{ recipe.image.url }}"
      alt="{{ recipe.title }}"
      class="img-fluid recipe-img"
    />
    {% else %}
    <img
      src="{% static 'images/default-recipe.jpg' %}"
      alt="Default Recipe Image"
      class="img-fluid recipe-img"
    />
    {% endif %}
  </div>

  <!-- Ingredients Section -->
  <h2 class="mt-4">Ingredients</h2>
  <ul class="list-group mb-4">
    {% for ingredient in ingredients %}
    <li class="list-group-item">
      <input type="checkbox" />
      {% if ingredient.quantity %}
      <strong>{{ ingredient.format_quantity }}</strong>
      {% endif %} 
      {% if ingredient.unit %} 
        {{ ingredient.unit }} 
      {% endif %} 
      {{ ingredient.ingredient.name }} 
      {% if ingredient.is_optional %}
      <span class="text-muted">(Optional)</span>
      {% endif %}
    </li>
    {% empty %}
    <li class="list-group-item">No ingredients listed.</li>
    {% endfor %}
  </ul>

  <!-- Preparation Steps Section -->
  <h2>Preparation Steps</h2>
  <ol class="mb-4">
    {{ recipe.instructions|safe }}
  </ol>

  <!-- Social Share Section -->
  <div class="social-share mt-4">
    <p>Share this recipe:</p>
    <div class="d-flex justify-content-center">
      <a
        href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}"
        target="_blank"
        class="btn btn-info mx-2 rounded-pill"
      >
        <i class="fab fa-facebook-f"></i> Facebook
      </a>
      <a
        href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text=Check%20out%20this%20delicious%20recipe!"
        target="_blank"
        class="btn btn-info mx-2 rounded-pill"
      >
        <i class="fab fa-twitter"></i> Twitter
      </a>
    </div>
  </div>
</div>

{% endblock %}
